# BLAgent

ä¸€ä¸ªåŸºäº React + Vite æ„å»ºçš„æ™ºèƒ½ä»£ç†åº”ç”¨ï¼Œé›†æˆé˜¿é‡Œç™¾ç‚¼ APIï¼Œæä¾›æ™ºèƒ½å¯¹è¯åŠŸèƒ½ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

- ğŸ¨ ç°ä»£åŒ–çš„ React 18 ç”¨æˆ·ç•Œé¢
- âš¡ åŸºäº Vite çš„å¿«é€Ÿå¼€å‘ç¯å¢ƒ
- ğŸ”§ Express.js åç«¯ API æœåŠ¡
- ğŸ¤– é›†æˆé˜¿é‡Œç™¾ç‚¼ AI å¯¹è¯åŠŸèƒ½
- ğŸ“ æ”¯æŒ Markdown æ ¼å¼æ¸²æŸ“
- ğŸ”„ è‡ªåŠ¨é‡è¯•æœºåˆ¶å’Œé”™è¯¯å¤„ç†
- ğŸŒ æ”¯æŒå¤šä¸ª API ç«¯ç‚¹è‡ªåŠ¨åˆ‡æ¢

## ğŸ“‹ é¡¹ç›®æ¶æ„
blagent/
â”œâ”€â”€ src/                    # React å‰ç«¯æºç 
â”‚   â”œâ”€â”€ App.jsx            # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ components/        # å¯å¤ç”¨ç»„ä»¶
â”‚   â””â”€â”€ assets/           # é™æ€èµ„æº
â”œâ”€â”€ api/                   # API è·¯ç”±å¤„ç†
â”‚   â””â”€â”€ chat.js           # èŠå¤© API å¤„ç†å‡½æ•°
â”œâ”€â”€ server.js             # Express åç«¯æœåŠ¡å™¨
â”œâ”€â”€ vite.config.js        # Vite é…ç½®ï¼ˆåŒ…å« API ä»£ç†ï¼‰
â”œâ”€â”€ .env.local            # ç¯å¢ƒå˜é‡é…ç½®
â””â”€â”€ package.json          # é¡¹ç›®ä¾èµ–å’Œè„šæœ¬

## ğŸ› ï¸ ç¯å¢ƒå‡†å¤‡

### ç³»ç»Ÿè¦æ±‚
- Node.js >= 16.0.0
- npm >= 8.0.0

### ç¯å¢ƒå˜é‡é…ç½®

1. ç¡®ä¿é¡¹ç›®æ ¹ç›®å½•å­˜åœ¨ `.env.local` æ–‡ä»¶
2. é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```bash
# é˜¿é‡Œç™¾ç‚¼ API é…ç½®
BAILIAN_API_KEY=ä½ çš„é˜¿é‡Œç™¾ç‚¼APIå¯†é’¥
BAILIAN_APP_ID=ä½ çš„åº”ç”¨ID

# å¯é€‰ï¼šæœåŠ¡å™¨ç«¯å£é…ç½®
PORT=3000
```

**è·å– API å¯†é’¥æ­¥éª¤ï¼š**
1. è®¿é—® [é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°](https://bailian.console.aliyun.com/)
2. åˆ›å»ºåº”ç”¨å¹¶è·å– APP_ID
3. åœ¨ API-KEY ç®¡ç†ä¸­åˆ›å»ºå¹¶è·å– API_KEY

## ğŸ“¦ å®‰è£…ä¾èµ–

```bash
# å®‰è£…é¡¹ç›®ä¾èµ–
npm install
```

## ğŸš€ å¯åŠ¨æµç¨‹

### å¼€å‘ç¯å¢ƒå¯åŠ¨

**æ–¹æ³•ä¸€ï¼šåˆ†æ­¥å¯åŠ¨ï¼ˆæ¨èï¼‰**

1. **å¯åŠ¨åç«¯ API æœåŠ¡å™¨**
   ```bash
   # ç»ˆç«¯ 1ï¼šå¯åŠ¨åç«¯æœåŠ¡
   node server.js
   ```
   
   æˆåŠŸå¯åŠ¨åä¼šçœ‹åˆ°ï¼š
   ```
   APIæœåŠ¡å™¨è¿è¡Œåœ¨ç«¯å£ 3000ï¼Œä»…æä¾›APIæœåŠ¡
   ```

2. **å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨**
   ```bash
   # ç»ˆç«¯ 2ï¼šå¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡
   npm run dev
   ```
   
   æˆåŠŸå¯åŠ¨åä¼šçœ‹åˆ°ï¼š
   ```
   Local:   http://localhost:5173/
   Network: use --host to expose
   ```

**æ–¹æ³•äºŒï¼šä½¿ç”¨ concurrently åŒæ—¶å¯åŠ¨**

1. å®‰è£… concurrentlyï¼ˆå¯é€‰ï¼‰ï¼š
   ```bash
   npm install --save-dev concurrently
   ```

2. åœ¨ package.json ä¸­æ·»åŠ è„šæœ¬ï¼š
   ```json
   {
     "scripts": {
       "dev:server": "node server.js",
       "dev:client": "vite",
       "dev:full": "concurrently \"npm run dev:server\" \"npm run dev:client\""
     }
   }
   ```

3. åŒæ—¶å¯åŠ¨å‰åç«¯ï¼š
   ```bash
   npm run dev:full
   ```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

**æœ¬åœ°ç”Ÿäº§ç¯å¢ƒæµ‹è¯•ï¼š**

1. **æ„å»ºå‰ç«¯åº”ç”¨**
   ```bash
   npm run build
   ```
   
   æ„å»ºäº§ç‰©ä¼šç”Ÿæˆåœ¨ `dist/` ç›®å½•

2. **å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨**
   ```bash
   npm start
   ```
   
   è¿™å°†å¯åŠ¨ Express æœåŠ¡å™¨ï¼ŒåŒæ—¶æä¾› API å’Œé™æ€æ–‡ä»¶æœåŠ¡

## ğŸŒ è®¿é—®åœ°å€

### å¼€å‘ç¯å¢ƒ
- **å‰ç«¯åº”ç”¨**: http://localhost:5173
- **åç«¯ API**: http://localhost:3000
- **å¥åº·æ£€æŸ¥**: http://localhost:3000/health
- **èŠå¤© API**: POST http://localhost:3000/api/chat

### ç”Ÿäº§ç¯å¢ƒ
- **å®Œæ•´åº”ç”¨**: http://localhost:3000
- **API æ¥å£**: http://localhost:3000/api/*

## ğŸ”§ API ä½¿ç”¨è¯´æ˜

### èŠå¤©æ¥å£

**è¯·æ±‚ç¤ºä¾‹ï¼š**
```bash
curl -X POST http://localhost:3000/api/chat \
  -H "Content-Type: application/json" \
  -d '{
    "message": "ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±"
  }'
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "response": "ä½ å¥½ï¼æˆ‘æ˜¯ä¸€ä¸ªAIåŠ©æ‰‹ï¼Œå¯ä»¥å¸®åŠ©ä½ å›ç­”é—®é¢˜ã€æä¾›ä¿¡æ¯å’Œè¿›è¡Œå¯¹è¯ã€‚æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ"
}
```

**é”™è¯¯å“åº”ï¼š**
```json
{
  "error": "æœåŠ¡å™¨é”™è¯¯",
  "message": "å…·ä½“é”™è¯¯ä¿¡æ¯",
  "type": "é”™è¯¯ç±»å‹"
}
```

## ğŸš€ éƒ¨ç½²æ–¹æ¡ˆ

### Vercel éƒ¨ç½²ï¼ˆæ¨èï¼‰

é¡¹ç›®å·²é…ç½® `vercel.json`ï¼Œæ”¯æŒä¸€é”®éƒ¨ç½²åˆ° Vercelï¼š

1. **å®‰è£… Vercel CLI**
   ```bash
   npm install -g vercel
   ```

2. **ç™»å½• Vercel**
   ```bash
   vercel login
   ```

3. **éƒ¨ç½²é¡¹ç›®**
   ```bash
   vercel
   ```

4. **é…ç½®ç¯å¢ƒå˜é‡**
   åœ¨ Vercel æ§åˆ¶å°ä¸­è®¾ç½®ï¼š
   - `BAILIAN_API_KEY`
   - `BAILIAN_APP_ID`

### Docker éƒ¨ç½²

1. **åˆ›å»º Dockerfile**
   ```dockerfile
   FROM node:18-alpine
   
   WORKDIR /app
   
   COPY package*.json ./
   RUN npm ci --only=production
   
   COPY . .
   RUN npm run build
   
   EXPOSE 3000
   
   CMD ["npm", "start"]
   ```

2. **æ„å»ºé•œåƒ**
   ```bash
   docker build -t blagent .
   ```

3. **è¿è¡Œå®¹å™¨**
   ```bash
   docker run -p 3000:3000 \
     -e BAILIAN_API_KEY=ä½ çš„APIå¯†é’¥ \
     -e BAILIAN_APP_ID=ä½ çš„åº”ç”¨ID \
     blagent
   ```

### ä¼ ç»ŸæœåŠ¡å™¨éƒ¨ç½²

1. **ä¸Šä¼ ä»£ç åˆ°æœåŠ¡å™¨**
   ```bash
   # ä½¿ç”¨ git å…‹éš†æˆ– scp ä¸Šä¼ 
   git clone https://github.com/ä½ çš„ç”¨æˆ·å/blagent.git
   cd blagent
   ```

2. **å®‰è£…ä¾èµ–å¹¶æ„å»º**
   ```bash
   npm install
   npm run build
   ```

3. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   # åˆ›å»º .env.local æ–‡ä»¶
   echo "BAILIAN_API_KEY=ä½ çš„APIå¯†é’¥" > .env.local
   echo "BAILIAN_APP_ID=ä½ çš„åº”ç”¨ID" >> .env.local
   ```

4. **ä½¿ç”¨ PM2 ç®¡ç†è¿›ç¨‹**
   ```bash
   # å®‰è£… PM2
   npm install -g pm2
   
   # å¯åŠ¨åº”ç”¨
   pm2 start server.js --name "blagent"
   
   # è®¾ç½®å¼€æœºè‡ªå¯
   pm2 startup
   pm2 save
   ```

## ğŸ› ï¸ å¼€å‘è„šæœ¬è¯´æ˜

```json
{
  "scripts": {
    "dev": "vite",                    // å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
    "build": "vite build",           // æ„å»ºç”Ÿäº§ç‰ˆæœ¬
    "lint": "eslint .",              // ä»£ç æ£€æŸ¥
    "preview": "vite preview",       // é¢„è§ˆæ„å»ºç»“æœ
    "start": "node server.js",       // å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
    "dev:server": "node server.js",  // ä»…å¯åŠ¨åç«¯æœåŠ¡
    "dev:client": "vite",            // ä»…å¯åŠ¨å‰ç«¯æœåŠ¡
    "dev:full": "concurrently \"npm run dev:server\" \"npm run dev:client\""  // åŒæ—¶å¯åŠ¨å‰åç«¯
  }
}
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **API è°ƒç”¨å¤±è´¥**
   - æ£€æŸ¥ `.env.local` æ–‡ä»¶ä¸­çš„ API å¯†é’¥æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸
   - æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯æ—¥å¿—

2. **å‰ç«¯æ— æ³•è®¿é—®åç«¯**
   - ç¡®è®¤åç«¯æœåŠ¡å™¨å·²å¯åŠ¨ï¼ˆç«¯å£ 3000ï¼‰
   - æ£€æŸ¥ `vite.config.js` ä¸­çš„ä»£ç†é…ç½®
   - ç¡®è®¤é˜²ç«å¢™è®¾ç½®

3. **æ„å»ºå¤±è´¥**
   - æ¸…é™¤ node_modules å¹¶é‡æ–°å®‰è£…ï¼š`rm -rf node_modules && npm install`
   - æ£€æŸ¥ Node.js ç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚

### æ—¥å¿—æŸ¥çœ‹

- **å¼€å‘ç¯å¢ƒ**ï¼šç›´æ¥åœ¨ç»ˆç«¯æŸ¥çœ‹å®æ—¶æ—¥å¿—
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šä½¿ç”¨ PM2 æŸ¥çœ‹æ—¥å¿—
  ```bash
  pm2 logs blagent
  ```

## ğŸ“š æŠ€æœ¯æ ˆ

### å‰ç«¯
- **React 18** - ç”¨æˆ·ç•Œé¢åº“
- **Vite** - æ„å»ºå·¥å…·å’Œå¼€å‘æœåŠ¡å™¨
- **React Markdown** - Markdown æ¸²æŸ“
- **CSS3** - æ ·å¼è®¾è®¡

### åç«¯
- **Node.js** - è¿è¡Œæ—¶ç¯å¢ƒ
- **Express.js** - Web æ¡†æ¶
- **dotenv** - ç¯å¢ƒå˜é‡ç®¡ç†
- **node-fetch** - HTTP è¯·æ±‚åº“

### AI æœåŠ¡
- **é˜¿é‡Œç™¾ç‚¼ API** - æ™ºèƒ½å¯¹è¯æœåŠ¡
- **è‡ªåŠ¨é‡è¯•æœºåˆ¶** - æé«˜æœåŠ¡å¯é æ€§
- **å¤šç«¯ç‚¹æ”¯æŒ** - ç¡®ä¿æœåŠ¡å¯ç”¨æ€§

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- æäº¤ GitHub Issue
- å‘é€é‚®ä»¶è‡³ï¼š[ä½ çš„é‚®ç®±]